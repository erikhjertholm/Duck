<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Nerd Search Generator</title>

    <!-- here's the sites list. -->
    <script id="data">
        window.sites = [
            "sciencedaily.com",
            "sciencedirect.com",
            "sciencedump.com",
            "sciencealert.com",
            "sciencenews.com",
            "elsevier.com",
            "newscientist.com",
            "nytimes.com/section/science",
            "popsci.com",
            "sciencefriday.com",
            "scientificamerican.com",
            "bbc.com/news/science_and_environment",
            "sciencemag.org",
            "phys.org",
            "ted.com",
            "futurity.org",
            "wired.com/category/science/",
            "nature.com",
            "symmetrymagazine.org",
            "discovermagazine.com",
            "nationalgeographic.com",
            "spectrum.ieee.org",
            "eurekalert.org",
            "technologyreview.com",
            "Forskning.no",
            "ncbi.nlm.nih.gov/pubmed/",
            "mayoclinic.org",
	            "Forskning.no",
	            "nrk.no/viten/",
	            "quora.com",
        ];
    </script>

    <style>
        .btn {
            background: #3498db;
            background-image: -webkit-linear-gradient(top, #3498db, #2980b9);
            background-image: -moz-linear-gradient(top, #3498db, #2980b9);
            background-image: -ms-linear-gradient(top, #3498db, #2980b9);
            background-image: -o-linear-gradient(top, #3498db, #2980b9);
            background-image: linear-gradient(to bottom, #3498db, #2980b9);
            -webkit-border-radius: 10;
            -moz-border-radius: 10;
            border-radius: 10px;
            font-family: Arial;
            color: #ffffff;
            font-size: 20px;
            padding: 10px 20px 10px 20px;
            text-decoration: none;
            cursor: hand;
        }

        .btn:hover {
            background: #3cb0fd;
            background-image: -webkit-linear-gradient(top, #3cb0fd, #3498db);
            background-image: -moz-linear-gradient(top, #3cb0fd, #3498db);
            background-image: -ms-linear-gradient(top, #3cb0fd, #3498db);
            background-image: -o-linear-gradient(top, #3cb0fd, #3498db);
            background-image: linear-gradient(to bottom, #3cb0fd, #3498db);
            text-decoration: none;
        }

        .input-text {
            border: 1px solid #3cb0fd;
            border-radius: 10px;
            font-size: 20px;
            padding: 10px 15px;
            margin-right: 4px;
            width: 280px;
        }

        .input-text:focus {
            outline: none;
        }

        .container {
            width: 800px;
            margin: 0 auto;
            padding-top: 67px;
        }

        #sitesFilter {
            margin: 0 20% auto auto;
            width: 40%;
 +        }

        .alert {
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid transparent;
            border-radius: 4px;
        }

        .alert-info {
            color: #31708f;
            background-color: #d9edf7;
            border-color: #bce8f1;
        }
    </style>
  </head>
  <body>
      <div class="container">

            <h1><center>Nerdes√∏k</center></h1>
            <div style="text-align: center;">
                <input type="text" id="searchTerm" class="input-text" /><a onclick="go();" href="javascript:void();" class="btn">GO!</a>
            </div>

            <br>

            <div class="alert alert-info" role="alert"> 
            This is a google search generator that exclusively searches on the pages checked off below. Missing a page? Send a proposal to nerd@erikhjertholm.net 
            </div>

            <div id="sitesFilter"></div>

    </div>

    <script>
        var searchBox = document.getElementById("searchTerm");
        document.addEventListener('DOMContentLoaded', function() {
            var container = document.getElementById('sitesFilter');
            window.sites.map(function(s, index, arr) {
                var id = 'siteFilter-' + index;

                var div = document.createElement('div');

                var checkbox = document.createElement('input');
                checkbox.type = "checkbox";
                checkbox.name = "filter[]";
                checkbox.className = "site-filter";
                checkbox.value = s;
                checkbox.id = id;
                if(index < arr.length - 1) { // the last checkbox is not checked
                    checkbox.checked = true;
                }

                var label = document.createElement('label');
                label.htmlFor = id;
                label.appendChild(document.createTextNode(s));

                div.appendChild(checkbox);
                div.appendChild(label);

                container.appendChild(div);

                searchBox.focus();
            });
        }, false);

        function go() {
            var searchTerm = encodeURI(searchBox.value);
            var mainUrl = 'https://www.google.no/#safe=off&q=';
            var googleUrl = mainUrl + searchTerm;

            // get the sites filter
            var sitesUrl = '';
            var filters = document.getElementsByClassName('site-filter');
            var i;
            for( i = 0; i < filters.length; i++ ) {
                if(filters[i].checked) {
                    sitesUrl += "+site:" + filters[i].value + "+OR"
                }
            }

            googleUrl += sitesUrl.replace(/\+OR$/, '');
            window.open(googleUrl);
        }

        document.getElementById("searchTerm")
            .addEventListener("keyup", function(event) {
                event.preventDefault();
                if (event.keyCode == 13) {
                    go();
                }
        });
    </script>
  </body>
</html>
